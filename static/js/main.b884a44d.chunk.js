(this.webpackJsonpbuscaminas=this.webpackJsonpbuscaminas||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(6),r=n.n(o),l=(n(13),n(7)),i=n(1),c=n(2),u=n(4),f=n(3),p=function(e){return e.data.isOpen?e.data.hasMine?s.a.createElement("div",{className:"cell open",onClick:function(){return e.open(e.data)},onContextMenu:function(e){e.preventDefault()}},"mina"):0===e.data.count?s.a.createElement("div",{className:"cell open",onClick:function(){return e.open(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"cell open",onClick:function(){return e.open(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}},e.data.count):e.data.hasFlag?s.a.createElement("div",{className:"cell open",onClick:function(){return e.open(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}},"band"):s.a.createElement("div",{className:"cell",onClick:function(){return e.open(e.data)},onContextMenu:function(t){t.preventDefault(),e.flag(e.data)}})},m=function(e){var t=e.cells.map((function(t,n){return s.a.createElement(p,{key:n,data:t,open:e.open,flag:e.flag})}));return s.a.createElement("div",{className:"row"},t)},d=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).createBoard=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,count:0,isOpen:!1,hasMine:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var o=Math.floor(Math.random()*e.rows),r=Math.floor(Math.random()*e.columns),l=t[o][r];l.hasMine?s--:l.hasMine=!0}return t},a.open=function(e){"perdiste"!==a.props.status&&new Promise((function(t){t(a.findMines(e))})).then((function(t){var n=a.state.rows,s=n[e.y][e.x];if(s.hasMine&&0===a.props.openCells){console.log("La celda tiene una mina. Intentalo de nuevo!!");var o=a.createBoard(a.props);a.setState({rows:o},(function(){a.open(e)}))}else e.hasFlag||s.isOpen||(a.props.openCellClick(),s.isOpen=!0,s.count=t,a.setState({rows:n}),s.hasMine||0!==t||a.findAroundCell(e),s.hasMine&&0!==a.props.openCells&&a.props.fin())}))},a.flag=function(e){if("perdiste"!==a.props.status&&!e.isOpen){var t=a.state.rows;e.hasFlag=!e.hasFlag,a.setState({rows:t}),a.props.cambiaNumBandera(e.hasFlag?-1:1)}},a.findMines=function(e){for(var t=0,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)e.y+n>=0&&e.x+s>=0&&e.y+n<a.state.rows.length&&e.x+s<a.state.rows[0].length&&(!a.state.rows[e.y+n][e.x+s].hasMine||0===n&&0===s||t++);return t},a.findAroundCell=function(e){for(var t=a.state.rows,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)e.y+n>=0&&e.x+s>=0&&e.y+n<t.length&&e.x+s<t[0].length&&(t[e.y+n][e.x+s].hasMine||t[e.y+n][e.x+s].isOpen||a.open(t[e.y+n][e.x+s]))},a.state={rows:a.createBoard(e)},a}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.props.openCells>e.openCells&&this.setState({rows:this.createBoard(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map((function(t,n){return s.a.createElement(m,{cells:t,key:n,open:e.open,flag:e.flag})}));return s.a.createElement("div",{className:"board"},t)}}]),n}(a.Component),h=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0,a=n<10?"0".concat(n):n,o="".concat(t,":").concat(a);return s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},"Flags: ",e.flagCount),s.a.createElement("button",{className:"reset",onClick:e.reset},"Reset"),s.a.createElement("div",{className:"timer"},"Time: ",o))},v=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).fin=function(){e.setState({status:"perdiste"})},e.ganador=function(){e.state.flags+e.state.openCells>=e.state.columns*e.state.rows&&e.setState({status:"winner"},alert("GANASTEEEE!!!!"))},e.reset=function(){e.intervals.map(clearInterval),e.setState(Object(l.a)({},e.baseState),(function(){e.intervals=[]}))},e.tick=function(){if(e.state.openCells>0&&"running"===e.state.status){var t=e.state.time+1;e.setState({time:t})}},e.setInterval=function(t,n){e.intervals.push(setInterval(t,n))},e.handleCellClick=function(){0===e.state.openCells&&"running"!==e.state.status&&e.setState({status:"running"},(function(){e.setInterval(e.tick,1e3)})),e.setState((function(e){return{openCells:e.openCells+1}}))},e.cambiaNumBandera=function(t){e.setState({flags:e.state.flags+t})},e.state={status:"waiting",rows:10,columns:10,flags:10,mines:10,time:0,openCells:0},e.baseState=e.state,e}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t){"running"===this.state.status&&this.ganador()}},{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){return s.a.createElement("div",{className:"minesweeper"},s.a.createElement("h1",null,"Busca Minas en React"),s.a.createElement(h,{time:this.state.time,flagCount:this.state.flags,reset:this.reset}),s.a.createElement(d,{status:this.state.status,cambiaNumBandera:this.cambiaNumBandera,fin:this.fin,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,openCells:this.state.openCells,openCellClick:this.handleCellClick}))}}]),n}(a.Component);r.a.render(s.a.createElement(v,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.b884a44d.chunk.js.map